
private bool isWhite
private float lastVal //used to return a value additionally to a move from the GetBestMove function;


function Think(board, timer):
    isWhite = board.IsWhiteToMove
    lastVal = 0
    depth = EvaluateDepth(timer)
    return GetBestMove(board, depth, alphabeta=int.maxValue);


function GetBestMove(board, depth, alphabeta):

    for moves in board:
        val = eval(move , board);
        if (depth > 0) {
            doMove
            GetBestMove(board, depth - 1, worstVal);
            val += lastVal;
            undoMove
        }
        if (val > alphabeta) {
            return ALPHABETA_CANCELLED
        }
        if isBestMove(move):
            bestMove = move
            bestVal = val
        else if isWorstMove(move):
            worstVal = val

    lastVal = bestVal
    return bestMove

function eval(board, move):
    val = evalPos(move.before) - evalPos(move.after)
    val += materialDifference
    val += evalStates(board)   //like checks, draws, checkmates
    return isWhite ? val : val * -1;